<!-- templates/courses/quiz_result.html -->
{% extends 'base.html' %}
{% block title %}نتيجة الاختبار{% endblock %}

{% block content %}

{% comment %}
    CRITICAL FIX: Replaced the non-existent `set` tag with Django's `with` tag.
    The `with` tag creates a context block. We define the variables for each
    score range and include the display logic within that block.
{% endcomment %}

{% if submission.score >= 80 %}
    {% with primary_color='green' message_icon='🎉' message_title='أداء استثنائي!' message_subtitle='لقد أتقنت محتوى هذه الوحدة. عمل رائع!' %}
        {% include 'courses/partials/quiz_result_card.html' %}
    {% endwith %}
{% elif submission.score >= 50 %}
    {% with primary_color='yellow' message_icon='👍' message_title='عمل جيد!' message_subtitle='لديك فهم جيد للمادة، مع مجال بسيط للتحسين.' %}
        {% include 'courses/partials/quiz_result_card.html' %}
    {% endwith %}
{% else %}
    {% with primary_color='red' message_icon='📖' message_title='فرصة للتعلم' message_subtitle='لا تقلق، كل خطأ هو فرصة للمراجعة والتحسن.' %}
        {% include 'courses/partials/quiz_result_card.html' %}
    {% endwith %}
{% endif %}

{% endblock %}